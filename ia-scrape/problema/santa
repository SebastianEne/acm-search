<div class="wiki_text_block"><p> </p>

<table style="margin-left:auto;margin-right:auto;" cellspacing="0"><tr><td><strong>Fişierul intrare/ieşire:</strong></td><td>santa.in, santa.out</td><td><strong>Sursă</strong></td><td>Stelele Informaticii 2005, clasele 11-12</td></tr><tr><td><strong>Autor</strong></td><td><a href="/cauta-probleme?tag_id%5B%5D=150">Sorin Stancu-Mara</a></td><td><a href="http://infoarena.ro/implica-te/extinde-arhiva/"><strong>Adăugată de</strong></a></td><td></td></tr><tr><td><strong>Timp execuţie pe test</strong></td><td>7 sec</td><td><strong>Limită de memorie</strong></td><td>65536 kbytes</td></tr><tr><td><strong>Scorul tău în arhivă</strong></td><td>N/A</td><td><strong>Dificultate</strong></td><td><span class="star-rating"><img src="http://infoarena.ro/static/images/stars/normal-full.png" alt="normal"><img src="http://infoarena.ro/static/images/stars/normal-full.png" alt="normal"><img src="http://infoarena.ro/static/images/stars/normal-full.png" alt="normal"><img src="http://infoarena.ro/static/images/stars/normal-full.png" alt="normal"><img src="http://infoarena.ro/static/images/stars/normal-full.png" alt="normal"><div class="hidden">5/5</div></span></td></tr></table><p style="float: right; margin-right: 1em"><a href="http://infoarena.ro/monitor?task=santa">Vezi solutiile trimise</a></p>

<h1>Santa<br></h1>

<p>HO HO <span class="caps">HO...</span> Max Damage a ajuns in Laponia, mai precis la fabrica de tractorase a lui Mos Craciun. Acum, toata lumea stie ca Mos Craciun are o lista cu copiii care au fost cuminti si ca le aduce in noaptea de ajun cate o jucarie, dar... sa zicem ca Max Damage nu mai e copil. El stie ca jucariile sunt gata si ca spiridusii vor trebui sa le duca de la atelierul lor (aflat in intersectia notata cu <var>S</var>) la casuta Mosului (aflata in intersectia notata cu <var>E</var>). Max Damage are o harta a orasului. Pe ea apar <var>N</var> intersectii, numerotate de la <var>1</var> la <var>N</var> , unite de <var>M</var> strazi. Acum Max Damage isi face urmatorul plan si are nevoie de ajutorul nostru. Stie ca maine spiridusii vor transporta jucariile de la atelier la casuta lui Mos Craciun. Problema este ca nu stie exact pe ce drum vor merge spiridusii, insa este cert ca ei nu vor trece de doua ori printr-o intersectie. Tot ce mai ramane de facut este ca Max sa sara in masina si sa verifice toate intersectiile in care s-ar putea gasi transportul de jucarii. Fiind si econom el nu trebuie sa treaca printr-o intersectie de doua ori sau prin intersectiile in care se stie sigur ca transportul de jucarii nu poate ajunge (sa fim seriosi, benzina costa destul de mult). Astfel el va pleca din "sediul" sau (intersectia notata cu <var>Q</var>) trecand prin toate si numai prin intersectiile unde transportul de jucarii ar putea ajunge. Turul de verificare facut de Max poate sa se sfarseasca in orice intersectie.</p>

<h2>Cerinta</h2>

<p>Daca este posibila realizarea unui astfel de drum Max Damage va cere unul dintre ele.</p>

<h2>Date de Intrare</h2>

<p>Prima linie a fisierului de intrare <var>santa.in</var> contine doua numere intregi <var>N</var> , <var>M</var> reprezentand numarul de intersectii, respectiv de strazi. Urmatoarele M linii contin cate doua numere <var>X<sub>i</sub></var> , <var>Y<sub>i</sub></var> reprezentand faptul ca exista o strada, care poate fi parcursa in ambele directii, intre intersectiile <var>X<sub>i</sub></var> si <var>Y<sub>i</sub></var>. Pe ultima linie se afla trei numere <var>S</var> , <var>E</var> , <var>Q</var> cu semnificatia de mai sus.</p>

<h2>Date de Iesire</h2>

<p>In fisierul <var>santa.out</var> veti afisa <code>No chance</code> daca Max nu isi poate realiza planul pentru fisierul de intrare corespunzator, sau numarul <var>X</var> de intersectii (aflat pe prima linie) ce trebuie vizitate pentru a-si realiza planul, iar pe linia urmatoare numerele <var>A<sub>1</sub> A<sub>2</sub> ... A<sub>x</sub></var> separate prin spatii reprezentand intersectiile, in ordinea in care Max Damage treace pentru verificare.</p>

<h2>Restrictii si precizari</h2>


<ul><li><var>1 ≤ N ≤ 45.000</var></li>
<li><var>1 ≤ M ≤ 130.000</var></li>
<li>oricum am alege un set de <var>16</var> sau mai multe intersectii exista doua intersectii in set <var>A</var> si <var>B</var> astfel incat este imposibil sa gasim un drum care pleaca din <var>A</var> , trece prin <var>B</var> si revine in <var>A</var> trecand printr-o intersectie cel mult odata(drumul poate sa treaca prin orice intersectie nu neaparat prin cele din setul ales).</li>
</ul><h2>Exemplu</h2>

<table class="example" cellspacing="0"><tr><th>santa.in</th><th>santa.out</th></tr><tr><td>5 5<br>
1 2<br>
1 4<br>
2 3<br>
3 4<br>
4 5<br>
1 4 2<br></td><td>4<br>
2 1 4 3</td></tr></table><div class="macroMessage">Trebuie sa te autentifici pentru a trimite solutii. <a href="/login">Click aici</a></div>

<div id="task_tags"><h3> Indicii de rezolvare</h3><a id="show_tags" href="javascript:show_tags()">
                Arată 3 categorii</a><ul id="task_tags"><li style="display: none;" class="tags_list_item">
            <span class="tag_name color_scheme_0"><a class="tag_search_anchor" href="/cauta-probleme?tag_id%5B%5D=96">Backtracking</a></span>
            <a href="javascript:show_tag_list(96)" id="tag_anchor_96" class="show_tag_anchor">
                ... 1 tag
            </a>
            <div style="display: none;" id="tag_list_96"> 
                <div class="sub_tag_name"><a class="sub_tag_search_anchor" href="/cauta-probleme?tag_id%5B%5D=114">Generarea tuturor permutarilor</a></div>
            </div>
        </li>
        <li style="display: none;" class="tags_list_item">
            <span class="tag_name color_scheme_4"><a class="tag_search_anchor" href="/cauta-probleme?tag_id%5B%5D=46">Grafuri</a></span>
            <a href="javascript:show_tag_list(46)" id="tag_anchor_46" class="show_tag_anchor">
                ... 3 taguri
            </a>
            <div style="display: none;" id="tag_list_46"> 
                <div class="sub_tag_name"><a class="sub_tag_search_anchor" href="/cauta-probleme?tag_id%5B%5D=433">Componente biconexe</a></div> <div class="sub_tag_name"><a class="sub_tag_search_anchor" href="/cauta-probleme?tag_id%5B%5D=57">Lant hamiltonian</a></div> <div class="sub_tag_name"><a class="sub_tag_search_anchor" href="/cauta-probleme?tag_id%5B%5D=47">Parcurgere in latime</a></div>
            </div>
        </li>
        <li style="display: none;" class="tags_list_item">
            <span class="tag_name color_scheme_4"><a class="tag_search_anchor" href="/cauta-probleme?tag_id%5B%5D=58">Programare dinamica</a></span>
            <a href="javascript:show_tag_list(58)" id="tag_anchor_58" class="show_tag_anchor">
                ... 1 tag
            </a>
            <div style="display: none;" id="tag_list_58"> 
                <div class="sub_tag_name"><a class="sub_tag_search_anchor" href="/cauta-probleme?tag_id%5B%5D=59">Dinamica pe stari exponentiale</a></div>
            </div>
        </li></ul></div>

<p><a href="http://infoarena.ro/documentatie/tutorial">Cum se trimit solutii?</a></p></div>