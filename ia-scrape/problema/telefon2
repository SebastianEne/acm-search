<div class="wiki_text_block"><p> </p>

<table style="margin-left:auto;margin-right:auto;" cellspacing="0"><tr><td><strong>Fişierul intrare/ieşire:</strong></td><td>telefon2.in, telefon2.out</td><td><strong>Sursă</strong></td><td>ONI 2010 - Baraj</td></tr><tr><td><strong>Autor</strong></td><td><a href="/cauta-probleme?tag_id%5B%5D=173">Andrei Paul Puni</a>, <a href="/cauta-probleme?tag_id%5B%5D=159">Clara Ionescu</a></td><td><a href="http://infoarena.ro/implica-te/extinde-arhiva/"><strong>Adăugată de</strong></a></td><td><span class="tiny-user"><a href="http://infoarena.ro/utilizator/andrei-alpha"><img src="/utilizator/andrei-alpha?action=download&amp;file=avatar&amp;resize=L16x16" alt="andrei-alpha">Andrei-Bogdan Antonescu</a> <a title="Rating andrei-alpha: 700" class="rating-badge-1" href="http://infoarena.ro/utilizator/andrei-alpha?action=rating">•</a><span class="username"><a href="http://infoarena.ro/utilizator/andrei-alpha">andrei-alpha</a></span></span></td></tr><tr><td><strong>Timp execuţie pe test</strong></td><td>0.2 sec</td><td><strong>Limită de memorie</strong></td><td>65536 kbytes</td></tr><tr><td><strong>Scorul tău în arhivă</strong></td><td>N/A</td><td><strong>Dificultate</strong></td><td>N/A</td></tr></table><p style="float: right; margin-right: 1em"><a href="http://infoarena.ro/monitor?task=telefon2">Vezi solutiile trimise</a></p>

<h1>Telefon2<br></h1>

<p>Cei <var>N</var> elevi ai unei clase s-au hotărât să formeze un „telefon fără fir”. Pentru aceasta, elevii au fost numerotaţi de la <var>1</var> la <var>N</var>, apoi fiecare elev şi-a ales un singur coleg (îl vom numi vecin), singurul căruia el îi va putea transmite în mod direct mesajele primite. Telefonul fără fir funcţionează astfel:</p>


<ul><li>iniţial un elev transmite un mesaj (evident, numai vecinului său);</li>
<li>fiecare elev care a primit (direct sau indirect) mesajul, transmite mesajul primit mai departe, vecinului său.</li>
</ul><p>Telefonul fără fir funcţionează corect, dacă oricare elev ar iniţia transmiterea mesajului, acesta va ajunge la fiecare dintre cei <var>N</var> elevi (deci inclusiv înapoi la elevul care a iniţiat transmiterea mesajului). Elevii au observat că telefonul lor fără fir nu funcţionează corect. Pentru ca telefonul fără fir să funcţioneze corect, ei se gândesc să realizeze o succesiune de modificări. Printr-o modificare un elev îşi poate schimba vecinul ales.</p>

<h2>Cerinta</h2>

<p>Determinaţi o succesiune cu număr minim de modificări, în urmă cărora telefonul fără fir să funcţioneze corect.</p>

<h2>Date de intrare</h2>

<p>Prima linie a fişierului de intrare <var>telefon2.in</var> conţine numărul natural <var>N</var>, reprezentând numărul elevilor. Pe cea de a doua linie se află <var>N</var> numere naturale, separate prin câte un spaţiu; al <var>i-lea</var> număr reprezintă vecinul ales de copilul <var>i (1 ≤ i ≤ N)</var>.</p>

<h2>Date de ieşire</h2>

<p>Pe prima linie a fişierului de ieşire <var>telefon2.out</var> se va scrie un număr natural <var>k</var>, reprezentând numărul minim de modificări necesare pentru ca telefonul fără fir să funcţioneze corect. Pe următoarele <var>k</var> linii se va scrie succesiunea modificărilor efectuate, câte o modificare pe o linie. O modificare este specificată prin două numere naturale separate prin spaţiu, <var>c v</var>, cu semnificaţia că elevul <var>c</var> îşi schimbă vecinul, noul său vecin fiind <var>v</var>.</p>

<h2>Restricţii</h2>


<ul><li><var>1 &lt; N ≤ 100 000</var></li>
<li>Dacă există mai multe soluţii, puteţi afişa oricare dintre acestea.</li>
<li>Pentru <var>30%</var> din teste se garantează că fiecare elev va fi ales ca vecin de către alt elev</li>
<li>Pentru alte <var>30%</var> din teste există cel puţin un elev care va primi direct sau indirect mesajul transmis de către oricare elev, inclusiv el însuşi.</li>
<li>Pentru alte <var>20%</var> din teste <var>N ≤ 1000</var> </li>
<li>Se vor acorda punctaje parţiale astfel:
<ul><li><var>30%</var> din punctajul pe fiecare test, reprezintă numărul minim de modificări</li>
<li>Restul de <var>70%</var> pentru reconstituirea soluţiei</li>
</ul></li>
</ul><h2>Exemplu</h2>

<table class="example" cellspacing="0"><tr><th>telefon2.in</th><th>telefon2.out</th></tr><tr><td>10<br>
6 9 2 7 3 1 9 3 7 9<br></td><td>5<br>
2 4<br>
6 10<br>
8 5<br>
9 1<br>
10 8<br></td></tr></table><div class="macroMessage">Trebuie sa te autentifici pentru a trimite solutii. <a href="/login">Click aici</a></div>



<p><a href="http://infoarena.ro/documentatie/tutorial">Cum se trimit solutii?</a></p></div>