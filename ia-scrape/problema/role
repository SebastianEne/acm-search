<div class="wiki_text_block"><p> </p>

<table style="margin-left:auto;margin-right:auto;" cellspacing="0"><tr><td><strong>Fişierul intrare/ieşire:</strong></td><td>role.in, role.out</td><td><strong>Sursă</strong></td><td>Baraj ONI 2007</td></tr><tr><td><strong>Autor</strong></td><td><a href="/cauta-probleme?tag_id%5B%5D=187">Radu Lupsa</a></td><td><a href="http://infoarena.ro/implica-te/extinde-arhiva/"><strong>Adăugată de</strong></a></td><td><span class="tiny-user"><a href="http://infoarena.ro/utilizator/DITzoneC"><img src="/utilizator/DITzoneC?action=download&amp;file=avatar&amp;resize=L16x16" alt="DITzoneC">Adrian Diaconu</a> <a title="Rating DITzoneC: 596" class="rating-badge-4" href="http://infoarena.ro/utilizator/DITzoneC?action=rating">•</a><span class="username"><a href="http://infoarena.ro/utilizator/DITzoneC">DITzoneC</a></span></span></td></tr><tr><td><strong>Timp execuţie pe test</strong></td><td>0.3 sec</td><td><strong>Limită de memorie</strong></td><td>16384 kbytes</td></tr><tr><td><strong>Scorul tău în arhivă</strong></td><td>N/A</td><td><strong>Dificultate</strong></td><td>N/A</td></tr></table><p style="float: right; margin-right: 1em"><a href="http://infoarena.ro/monitor?task=role">Vezi solutiile trimise</a></p>

<h1>Role<br></h1>

<p>Gigel este mare fan al muzicii anilor '70. El are o colectie impresionanta de benzi magnetice cu melodiile compuse in acea perioada. Tehnica folosita in acea perioada poate parea rudimentara in zilele noastre, insa Gigel doreste sa reconstituie cat mai mult din atmosfera epocii.<br>
Fiecare melodie este inregistrata pe o banda magnetica; benzile sunt numerotate de la <var>1</var> la <var>N</var>. Fiecare banda este infasurata pe cate o rola din plastic, iar Gigel mai dispune de o rola goala. Rolele sunt numerotate de la <var>0</var> la <var>N</var>, fiecare banda avandu-si locul pe rola cu acelasi numar, iar rola <var>0</var> fiind rola goala.</p>

<p>Cand Gigel asculta o melodie, magnetofonul deruleaza banda de pe rola ei si o infasoara pe rola goala; la final banda se gaseste pe rola ce initial era goala, bobinata invers, adica cu inceputul benzii in centrul rolei, iar rola pe care se gasea initial banda devine goala. Gigel are intotdeauna grija ca, dupa ce asculta o melodie, sa rebobineze banda inapoi pe rola ei. Fratele mai mic al lui Gigel este mai dezordonat si lasa adesea banda pe rola pe care ajunge in urma ascultarii. El foloseste apoi rola proaspat eliberata pe post de rola goala pentru a asculta urmatoarea melodie. Astfel, dupa o vreme, multe dintre benzi se gasesc pe alta rola decat cea proprie, si unele benzi sunt bobinate invers, adica inceputul melodiei este in interiorul infasurarii (trebuind derulate inainte de-a putea fi ascultate).</p>

<p>Gigel doreste acum sa restabileasca ordinea, aducand fiecare banda pe rola ei si bobinata cu inceputul in exterior. In acest scop el poate executa o secventa de operatii. La o operatie el poate doar sa ia o rola si sa deruleze banda de pe ea pe singura rola ce este goala in acel moment, banda inversandu-si cu aceasta ocazie sensul de bobinare.</p>

<h2>Cerinta</h2>

<p>Se cere sa se determine o secventa minima de operatii in urma carora fiecare banda ajunge pe rola cu numarul egal cu numarul benzii si infasurata cu inceputul in exterior.</p>

<h2>Date de intrare</h2>

<p>Fisierul de intrare <var>role.in</var> va contine pe prima linie un numar natural <var>N</var> reprezentand numarul de benzi. Pe urmatoarele <var>N</var> linii se gasesc cate doua numere naturale separate printr-un spatiu, <var>R</var> si <var>I</var>. A <var>k</var>-a pereche descrie pozitia benzii cu numarul <var>k</var>: <var>R</var> reprezinta numarul rolei pe care se afla banda <var>k</var>, iar <var>I</var> are valoarea <var>0</var> daca banda este infasurata normal (cu inceputul in exterior) si <var>1</var> daca este infasurata invers.</p>

<h2>Date de iesire</h2>

<p>Fisierul de iesire <var>role.out</var> va contine o secventa de numere naturale, cate un numar pe o linie pe linie. Numarul de pe linia <var>i</var> reprezenta numarul rolei de pe care se muta banda pe rola goala la cea de a <var>i</var>-a operatie executata.</p>

<h2>Restrictii</h2>


<ul><li><var>1 ≤ N ≤ 100 000</var></li>
<li>Pe o rola poate exista cel mult o banda la un moment dat.</li>
<li>Pentru toate datele de test va exista o solutie care necesita cel putin o operatie.</li>
<li>Punctaj
<ul><li>Pentru solutie optima se acorda <var>100%</var> din punctaj.</li>
<li>Daca solutia nu este optima, dar este corecta, se vor acorda punctaje partiale dupa cum urmeaza:
<ul><li>daca diferenta dintre numarul de operatii executate de concurent si numarul optim de operatii este mai mica sau egala decat <var>10%</var> din numarul optim (parte intreaga), se acorda <var>60%</var> din punctaj;</li>
<li>daca diferenta dintre numarul de operatii executate de concurent si numarul optim de operatii este mai mare decat <var>10%</var> din numarul optim (parte intreaga), se acorda <var>20%</var> din punctaj.</li>
</ul></li>
</ul></li>
</ul><h2>Exemplu</h2>

<table class="example" cellspacing="0"><tr><th>role.in</th><th>role.out</th></tr><tr><td>2<br>
1 0<br>
0 1<br></td><td>0<br></td></tr><tr><td>3<br>
2 0<br>
0 1<br>
3 1<br></td><td>3<br>
2<br>
1<br>
3<br>
2<br>
0<br></td></tr></table><div class="macroMessage">Trebuie sa te autentifici pentru a trimite solutii. <a href="/login">Click aici</a></div>



<p><a href="http://infoarena.ro/documentatie/tutorial">Cum se trimit solutii?</a></p></div>